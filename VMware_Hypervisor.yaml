zabbix_export:
  version: '6.4'
  template_groups:
    - uuid: a571c0d144b14fd4a87a9d9b2aa9fcd6
      name: Templates/Applications
  templates:
    - uuid: 5899b2f0aced4085b5ac25d0461b3425
      template: 'VMware Hypervisor'
      name: 'VMware Hypervisor'
      description: 'Generated by official Zabbix template tool "Templator" 2.0.0'
      vendor:
        name: Zabbix
        version: 6.4-0
      groups:
        - name: Templates/Applications
      items:
        - uuid: 3010cb082f23478b858912f944347530
          name: 'VMware: Hypervisor ping'
          type: SIMPLE
          key: 'icmpping[]'
          history: 7d
          description: 'Checks if the hypervisor is running and accepting ICMP pings.'
          valuemap:
            name: 'Service state'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          tags:
            - tag: component
              value: application
            - tag: component
              value: health
          triggers:
            - uuid: ab84a61566a5402db59efd40d20714a5
              expression: 'last(/VMware Hypervisor/icmpping[])=0'
              name: 'VMware: Hypervisor is down'
              priority: AVERAGE
              description: 'The service is unavailable or does not accept ICMP ping.'
              manual_close: 'YES'
              dependencies:
                - name: 'VMware: Hypervisor has been restarted'
                  expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
              tags:
                - tag: scope
                  value: availability
        - uuid: af4d0877fda84753816c817ad76162f1
          name: 'VMware: Cluster name'
          type: SIMPLE
          key: 'vmware.hv.cluster.name[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Cluster name of the guest VM.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: cluster
        - uuid: c4ebd62118464e7a8d1945f80d70f8ae
          name: 'VMware: CPU usage in percents'
          type: SIMPLE
          key: 'vmware.hv.cpu.usage.perf[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          value_type: FLOAT
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'CPU usage as a percentage during the interval.'
          tags:
            - tag: component
              value: cpu
        - uuid: 1bff6fbd300d4455a787a273d957bba3
          name: 'VMware: CPU usage'
          type: SIMPLE
          key: 'vmware.hv.cpu.usage[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: Hz
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Aggregated CPU usage across all cores on the host in Hz. This is only available if the host is connected.'
          tags:
            - tag: component
              value: cpu
        - uuid: aad168c33cd14f76aa14ab5ca26498ec
          name: 'VMware: CPU utilization'
          type: SIMPLE
          key: 'vmware.hv.cpu.utilization[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          value_type: FLOAT
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'CPU usage as a percentage during the interval depends on power management or HT.'
          tags:
            - tag: component
              value: cpu
        - uuid: e4d27d7f9b9048d4ae6c60cbdd6c0091
          name: 'VMware: Datacenter name'
          type: SIMPLE
          key: 'vmware.hv.datacenter.name[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Datacenter name of the hypervisor.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: datacenter
        - uuid: 5c29837f75f04d7f9a5786691b3dd991
          name: 'VMware: Full name'
          type: SIMPLE
          key: 'vmware.hv.fullname[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The complete product name, including the version information.'
          inventory_link: OS_FULL
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: system
        - uuid: ad0053d57b834e6a9776c08e1c455d55
          name: 'VMware: CPU frequency'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.freq[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          units: Hz
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The speed of the CPU cores. This is an average value if there are multiple speeds. The product of CPU frequency and number of cores is approximately equal to the sum of the MHz for all the individual cores on the host.'
          tags:
            - tag: component
              value: cpu
        - uuid: 3f0c35fcef9e4699ac5a1c51d80f8da4
          name: 'VMware: CPU model'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.model[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The CPU model.'
          tags:
            - tag: component
              value: cpu
        - uuid: c99a5bf2e3904f97b3d361ca20af7883
          name: 'VMware: CPU cores'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.num[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of physical CPU cores on the host. Physical CPU cores are the processors contained by a CPU package.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          tags:
            - tag: component
              value: cpu
        - uuid: 89cb0a4809e7454a862f398a0e9d6bed
          name: 'VMware: CPU threads'
          type: SIMPLE
          key: 'vmware.hv.hw.cpu.threads[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of physical CPU threads on the host.'
          tags:
            - tag: component
              value: cpu
        - uuid: ce89c38e6e5d4338a30ee150be1b2b67
          name: 'VMware: Total memory'
          type: SIMPLE
          key: 'vmware.hv.hw.memory[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The physical memory size.'
          tags:
            - tag: component
              value: memory
        - uuid: 7ed7ac26da384bcda976badf24ebbec1
          name: 'VMware: Model'
          type: SIMPLE
          key: 'vmware.hv.hw.model[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The system model identification.'
          inventory_link: MODEL
          tags:
            - tag: component
              value: system
        - uuid: 6c4aab55b3e640779a25ac90b9ca2a43
          name: 'VMware: Bios UUID'
          type: SIMPLE
          key: 'vmware.hv.hw.uuid[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The hardware BIOS identification.'
          tags:
            - tag: component
              value: system
        - uuid: aec06090d16d4bdd8ed3494b448f19d8
          name: 'VMware: Vendor'
          type: SIMPLE
          key: 'vmware.hv.hw.vendor[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The hardware vendor identification.'
          inventory_link: VENDOR
          tags:
            - tag: component
              value: system
        - uuid: 21020a79436a49c38caf8941f6b68da3
          name: 'VMware: Ballooned memory'
          type: SIMPLE
          key: 'vmware.hv.memory.size.ballooned[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The amount of guest physical memory that is currently reclaimed through the balloon driver. Sum of all guest VMs.'
          tags:
            - tag: component
              value: memory
        - uuid: 93d680d6886d446badbbe995ddd9ba9c
          name: 'VMware: Used memory'
          type: SIMPLE
          key: 'vmware.hv.memory.used[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Physical memory usage on the host.'
          tags:
            - tag: component
              value: memory
        - uuid: 33f78ab6ee6c4e7585a83a60cdecab6f
          name: 'VMware: Number of bytes received'
          type: SIMPLE
          key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
          history: 7d
          units: Bps
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network input statistics (bytes per second).'
          tags:
            - tag: component
              value: network
        - uuid: b013afcba08b47f4a5b590a59f464a58
          name: 'VMware: Number of bytes transmitted'
          type: SIMPLE
          key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
          history: 7d
          units: Bps
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'VMware hypervisor network output statistics (bytes per second).'
          tags:
            - tag: component
              value: network
        - uuid: de9db758e0a64541b08c78feb454b020
          name: 'VMware: Used memory (%)'
          type: SIMPLE
          key: 'vmware.hv.perfcounter[{$VMWARE.URL},{$VMWARE.HV.UUID},mem/usage,"[average]"]'
          history: 7d
          value_type: FLOAT
          units: B
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Physical memory usage on the host.'
          tags:
            - tag: component
              value: memory
        - uuid: fa3785f328664a1e81feae6405db1b1f
          name: 'VMware: CPU Ready Readiness %'
          type: SIMPLE
          key: 'vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"]'
          history: 7d
          value_type: FLOAT
          units: '%'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Time that virtual machines were ready, but could not get scheduled to run on the physical CPU during last measurement interval. CPU ready time is dependent on the number of virtual machines on the host and their CPU loads.'
          tags:
            - tag: component
              value: cpu
          triggers:
            - uuid: 4ba3035ba3f142d7a58b348cd9339e90
              expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],5m)>40'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],5m)<30'
              name: 'VMware: CPU Ready Readiness over 40% for 5m'
              status: DISABLED
              priority: INFO
              description: 'This is a measure of how much time VMs were ready for the CPU but had to wait for it.'
              dependencies:
                - name: 'VMware: CPU Ready Readiness over 50% for last 15m'
                  expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],15m)>50'
                  recovery_expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],15m)<40'
                - name: 'VMware: Hypervisor has been restarted'
                  expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
              tags:
                - tag: scope
                  value: performance
            - uuid: a267bb6adac94fa5b0b673330ee5f492
              expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],15m)>50'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],15m)<40'
              name: 'VMware: CPU Ready Readiness over 50% for last 15m'
              priority: INFO
              dependencies:
                - name: 'VMware: CPU Ready Readiness over 80% for last 30m'
                  expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],30m)>80'
                  recovery_expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],30m)<70'
                - name: 'VMware: Hypervisor has been restarted'
                  expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
              tags:
                - tag: scope
                  value: performance
            - uuid: ff4dffb9d1784a6386aaf88f54666051
              expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],30m)>80'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'avg(/VMware Hypervisor/vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"],30m)<70'
              name: 'VMware: CPU Ready Readiness over 80% for last 30m'
              priority: INFO
              dependencies:
                - name: 'VMware: Hypervisor has been restarted'
                  expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
              tags:
                - tag: scope
                  value: performance
        - uuid: 23ea6b67c4584ea999971a4e09fa831b
          name: 'VMware: CPU Ready Summation'
          type: SIMPLE
          key: 'vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/ready[summation]"]'
          history: 7d
          value_type: FLOAT
          units: ms
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Time that virtual machines were ready, but could not get scheduled to run on the physical CPU during last measurement interval. CPU ready time is dependent on the number of virtual machines on the host and their CPU loads.'
          tags:
            - tag: component
              value: cpu
        - uuid: e4116d7c7e234c5ebd5784f42ade1f2e
          name: 'VMware: Power usage maximum allowed'
          type: SIMPLE
          key: 'vmware.hv.power[{$VMWARE.URL},{$VMWARE.HV.UUID},max]'
          history: 7d
          units: '!W'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Maximum allowed power usage.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
          tags:
            - tag: component
              value: power
        - uuid: 179a981cf30f4f77869e3b50dc2bc333
          name: 'VMware: Power usage'
          type: SIMPLE
          key: 'vmware.hv.power[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: '!W'
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Current power usage.'
          tags:
            - tag: component
              value: power
        - uuid: 3c9d6ffb53624758ad888bf70f69218c
          name: 'VMware: Get sensors'
          type: SIMPLE
          key: 'vmware.hv.sensors.get[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: '0'
          trends: '0'
          value_type: TEXT
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Master item for sensors data.'
          tags:
            - tag: component
              value: raw
        - uuid: 0cec294521314c5482233b5b96e90c8d
          name: 'VMware: Overall status'
          type: SIMPLE
          key: 'vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'The overall alarm status of the host: gray - unknown, green - ok, red - it has a problem, yellow - it might have a problem.'
          valuemap:
            name: 'VMware status'
          tags:
            - tag: component
              value: health
          triggers:
            - uuid: 378511e0f1794874a68aef1b43561ee5
              expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
              name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
              priority: HIGH
              description: 'One or more components in the appliance might be in an unusable status and the appliance might become unresponsive soon. Security patches might be available.'
              dependencies:
                - name: 'VMware: Hypervisor has been restarted'
                  expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
            - uuid: ef6ca4d7033c4c8cb963eb7d493b3c7b
              expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=2'
              name: 'VMware: The {$VMWARE.HV.UUID} health is Yellow'
              priority: AVERAGE
              description: 'One or more components in the appliance might become overloaded soon.'
              dependencies:
                - name: 'VMware: Hypervisor has been restarted'
                  expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: ecad96137494476293b57a0440de3f65
          name: 'VMware: Uptime'
          type: SIMPLE
          key: 'vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          history: 7d
          units: uptime
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'System uptime.'
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: 01d316b0a8cf4998b344f0c4ef1daa32
              expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
              name: 'VMware: Hypervisor has been restarted'
              event_name: 'VMware: Hypervisor has been restarted (uptime < 10m)'
              priority: WARNING
              description: 'Uptime is less than 10 minutes.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 222ad20887cf479b8e81a4c338078d17
          name: 'VMware: Version'
          type: SIMPLE
          key: 'vmware.hv.version[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          trends: '0'
          value_type: CHAR
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Dot-separated version string.'
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: c398b8fca7074182a127f29b09f3601b
              expression: 'change(/VMware Hypervisor/vmware.hv.version[{$VMWARE.URL},{$VMWARE.HV.UUID}])<>0'
              name: 'VMware: Hypervisor OS Version changed'
              priority: INFO
              manual_close: 'YES'
              dependencies:
                - name: 'VMware: Hypervisor has been restarted'
                  expression: 'last(/VMware Hypervisor/vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}])<10m'
        - uuid: 2045df572e864834bd4bd97046353f4e
          name: 'VMware: Number of guest VMs'
          type: SIMPLE
          key: 'vmware.hv.vm.num[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          history: 7d
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          description: 'Number of guest virtual machines.'
          tags:
            - tag: component
              value: system
      discovery_rules:
        - uuid: fb7774df87994355baff7402d9fabcc2
          name: 'Datastore discovery'
          type: SIMPLE
          key: 'vmware.hv.datastore.discovery[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          delay: 1h
          username: '{$VMWARE.USERNAME}'
          password: '{$VMWARE.PASSWORD}'
          item_prototypes:
            - uuid: 65e6c165c3674953b2845d4101a9a6bf
              name: 'VMware: Multipath count for datastore {#DATASTORE}'
              type: SIMPLE
              key: 'vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Number of available datastore paths.'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
              trigger_prototypes:
                - uuid: 8f1de4827ba446ef902ca5fa44109c6d
                  expression: 'last(/VMware Hypervisor/vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}],#1)<>last(/VMware Hypervisor/vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}],#2) and last(/VMware Hypervisor/vmware.hv.datastore.multipath[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}])<{#MULTIPATH.COUNT}'
                  name: 'VMware: The multipath count has been changed'
                  opdata: 'Current: {ITEM.LASTVALUE}, Registered: {#MULTIPATH.COUNT}'
                  priority: AVERAGE
                  description: 'The number of available datastore paths less than registered ({#MULTIPATH.COUNT}).'
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 259d1ff4bde143248f7ee2f7f880cb62
              name: 'VMware: Average read latency of the datastore {#DATASTORE}'
              type: SIMPLE
              key: 'vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average amount of time for a read operation from the datastore (milliseconds).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
              trigger_prototypes:
                - uuid: 7f24f87c6b3b42eea13114aa588bf231
                  expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],10m)>={$VMWARE.DATASTORE.LATENCY.READ.AVG}'
                  name: 'VMware: Average read latency of the datastore {#DATASTORE} over average limit for 10m'
                  priority: AVERAGE
                  dependencies:
                    - name: 'VMware: Average read latency of the datastore {#DATASTORE} over high limit for 15m'
                      expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],15m)>={$VMWARE.DATASTORE.LATENCY.READ.HIGH}'
                - uuid: f96d639413284e2bb3b7ccf9bf5097e6
                  expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],15m)>={$VMWARE.DATASTORE.LATENCY.READ.HIGH}'
                  name: 'VMware: Average read latency of the datastore {#DATASTORE} over high limit for 15m'
                  priority: HIGH
                - uuid: ca7a302cd1ac45b28a5d5d70c64843fe
                  expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],5m)>={$VMWARE.DATASTORE.LATENCY.READ.WARN}'
                  name: 'VMware: Average read latency of the datastore {#DATASTORE} over warn limit for 5m'
                  priority: WARNING
                  dependencies:
                    - name: 'VMware: Average read latency of the datastore {#DATASTORE} over average limit for 10m'
                      expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],10m)>={$VMWARE.DATASTORE.LATENCY.READ.AVG}'
            - uuid: f36245398cc4460a9cb4ec741612693b
              name: 'VMware: Free space on datastore {#DATASTORE} (percentage)'
              type: SIMPLE
              key: 'vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},pfree]'
              delay: 5m
              history: 7d
              value_type: FLOAT
              units: '%'
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware datastore space in percentage from total.'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
            - uuid: cc83e8f5ec08483db75482706bf01aba
              name: 'VMware: Total size of datastore {#DATASTORE}'
              type: SIMPLE
              key: 'vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}]'
              delay: 5m
              history: 7d
              units: B
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'VMware datastore space in bytes.'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
            - uuid: 9db980d8f5f44af5ad11a5949d80031d
              name: 'VMware: Average write latency of the datastore {#DATASTORE}'
              type: SIMPLE
              key: 'vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency]'
              history: 7d
              username: '{$VMWARE.USERNAME}'
              password: '{$VMWARE.PASSWORD}'
              description: 'Average amount of time for a write operation to the datastore (milliseconds).'
              tags:
                - tag: component
                  value: datastore
                - tag: datastore
                  value: '{#DATASTORE}'
              trigger_prototypes:
                - uuid: 390b3a665e854eaeb64257a015a3ed0c
                  expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],10m)>={$VMWARE.DATASTORE.LATENCY.WRITE.AVG}'
                  name: 'VMware: Average write latency of the datastore {#DATASTORE} over average limit for 10m'
                  priority: AVERAGE
                  dependencies:
                    - name: 'VMware: Average read latency of the datastore {#DATASTORE} over average limit for 10m'
                      expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],10m)>={$VMWARE.DATASTORE.LATENCY.READ.AVG}'
                    - name: 'VMware: Average write latency of the datastore {#DATASTORE} over high limit for 15m'
                      expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],15m)>={$VMWARE.DATASTORE.LATENCY.WRITE.HIGH}'
                - uuid: 5119988098814f618b0f9748994cc377
                  expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],15m)>={$VMWARE.DATASTORE.LATENCY.WRITE.HIGH}'
                  name: 'VMware: Average write latency of the datastore {#DATASTORE} over high limit for 15m'
                  priority: HIGH
                  dependencies:
                    - name: 'VMware: Average read latency of the datastore {#DATASTORE} over average limit for 10m'
                      expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],10m)>={$VMWARE.DATASTORE.LATENCY.READ.AVG}'
                - uuid: 0ca416e81cc5403e82983eb936c6bf4a
                  expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],5m)>={$VMWARE.DATASTORE.LATENCY.WRITE.WARN}'
                  name: 'VMware: Average write latency of the datastore {#DATASTORE} over warn limit for 5m'
                  priority: WARNING
                  dependencies:
                    - name: 'VMware: Average read latency of the datastore {#DATASTORE} over average limit for 10m'
                      expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],10m)>={$VMWARE.DATASTORE.LATENCY.READ.AVG}'
                    - name: 'VMware: Average write latency of the datastore {#DATASTORE} over average limit for 10m'
                      expression: 'avg(/VMware Hypervisor/vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency],10m)>={$VMWARE.DATASTORE.LATENCY.WRITE.AVG}'
          graph_prototypes:
            - uuid: f0f5ae5692af4f0686b6ee4585d1047f
              name: 'Average read/write latency of the datastore {#DATASTORE}'
              graph_items:
                - color: 1A7C11
                  calc_fnc: ALL
                  item:
                    host: 'VMware Hypervisor'
                    key: 'vmware.hv.datastore.read[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency]'
                - sortorder: '1'
                  color: '274482'
                  calc_fnc: ALL
                  item:
                    host: 'VMware Hypervisor'
                    key: 'vmware.hv.datastore.write[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE},latency]'
            - uuid: ae838146f46640b09ff8d575424131b4
              name: 'Space utilization datastore {#DATASTORE}'
              graph_items:
                - color: FF0000
                  calc_fnc: ALL
                  item:
                    host: 'VMware Hypervisor'
                    key: 'vmware.hv.datastore.size[{$VMWARE.URL},{$VMWARE.HV.UUID},{#DATASTORE}]'
        - uuid: deb31adf69634837839e2d8f87167f28
          name: 'Healthcheck discovery'
          type: DEPENDENT
          key: vmware.hv.healthcheck.discovery
          delay: '0'
          description: 'VMware Rollup Health State sensor discovery'
          item_prototypes:
            - uuid: fabb7524dd454daa942266e5565ce40e
              name: 'VMware: Health state rollup'
              type: DEPENDENT
              key: 'vmware.hv.sensor.health.state[{#SINGLETON}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: CHAR
              description: 'The host health state rollup sensor value: gray - unknown, green - ok, red - it has a problem, yellow - it might have a problem.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$..HostNumericSensorInfo[?(@.name=="VMware Rollup Health State")].healthState.label.first()'
              master_item:
                key: 'vmware.hv.sensors.get[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
              tags:
                - tag: component
                  value: health
              trigger_prototypes:
                - uuid: 9f2a65161946436986aacf6c9a637673
                  expression: 'last(/VMware Hypervisor/vmware.hv.sensor.health.state[{#SINGLETON}])="Red"'
                  name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
                  priority: HIGH
                  description: 'One or more components in the appliance might be in an unusable status and the appliance might become unresponsive soon. Security patches might be available.'
                  dependencies:
                    - name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
                      expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
                - uuid: dc4f84eb8d2143bb80999fbc58f38928
                  expression: 'last(/VMware Hypervisor/vmware.hv.sensor.health.state[{#SINGLETON}])="Yellow"'
                  name: 'VMware: The {$VMWARE.HV.UUID} health is Yellow'
                  priority: AVERAGE
                  description: 'One or more components in the appliance might become overloaded soon.'
                  dependencies:
                    - name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
                      expression: 'last(/VMware Hypervisor/vmware.hv.sensor.health.state[{#SINGLETON}])="Red"'
                    - name: 'VMware: The {$VMWARE.HV.UUID} health is Red'
                      expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=3'
                    - name: 'VMware: The {$VMWARE.HV.UUID} health is Yellow'
                      expression: 'last(/VMware Hypervisor/vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}])=2'
                  tags:
                    - tag: scope
                      value: availability
                    - tag: scope
                      value: performance
          master_item:
            key: 'vmware.hv.sensors.get[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$..HostNumericSensorInfo[?(@.name=="VMware Rollup Health State")]'
              error_handler: CUSTOM_VALUE
              error_handler_params: '[]'
            - type: JAVASCRIPT
              parameters:
                - 'return JSON.stringify(value != "[]" ? [{''{#SINGLETON}'': ''''}] : []);'
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 6h
      tags:
        - tag: class
          value: software
        - tag: sonic-alert-routing
          value: vmware
        - tag: target
          value: vmware
        - tag: target
          value: vmware-hypervisor
      macros:
        - macro: '{$VMWARE.PASSWORD}'
          type: VAULT
          value: 'soc-sysadm/monitoring/zabbix.noc/zabbix@vcenter.local:password'
          description: 'VMware service {$USERNAME} user password'
        - macro: '{$VMWARE.URL}'
          value: 'https://vcenter7.sr.sonic.net/sdk'
          description: 'VMware service (vCenter or ESX hypervisor) SDK URL (https://servername/sdk)'
        - macro: '{$VMWARE.USERNAME}'
          type: VAULT
          value: 'soc-sysadm/monitoring/zabbix.noc/zabbix@vcenter.local:username'
          description: 'VMware service user name'
      dashboards:
        - uuid: 310940e809df410a95197b428c1d09f6
          name: 'VMware Host Summary'
          pages:
            - widgets:
                - type: item
                  name: 'Overall Status'
                  width: '3'
                  fields:
                    - type: INTEGER
                      name: adv_conf
                      value: '1'
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.status[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                    - type: STRING
                      name: thresholds.color.0
                      value: B4B4B4
                    - type: STRING
                      name: thresholds.color.1
                      value: 00FF00
                    - type: STRING
                      name: thresholds.color.2
                      value: FFBF00
                    - type: STRING
                      name: thresholds.color.3
                      value: FF4000
                    - type: STRING
                      name: thresholds.threshold.0
                      value: '0'
                    - type: STRING
                      name: thresholds.threshold.1
                      value: '1'
                    - type: STRING
                      name: thresholds.threshold.2
                      value: '2'
                    - type: STRING
                      name: thresholds.threshold.3
                      value: '3'
                - type: graph
                  name: 'Guest VMs'
                  'y': '2'
                  width: '12'
                  height: '3'
                  hide_header: 'YES'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'VMware Hypervisor'
                        name: 'Number of Guest VMs'
                - type: graph
                  name: 'Memory usage'
                  'y': '5'
                  width: '12'
                  height: '5'
                  hide_header: 'YES'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'VMware Hypervisor'
                        name: 'Host memory usage'
                - type: graph
                  name: 'Host network usage'
                  'y': '10'
                  width: '24'
                  height: '4'
                  hide_header: 'YES'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'VMware Hypervisor'
                        name: 'VMware host network usage(?)'
                - type: graphprototype
                  name: 'R/W latency of datastores'
                  'y': '14'
                  width: '24'
                  height: '12'
                  hide_header: 'YES'
                  fields:
                    - type: GRAPH_PROTOTYPE
                      name: graphid
                      value:
                        host: 'VMware Hypervisor'
                        name: 'Average read/write latency of the datastore {#DATASTORE}'
                    - type: INTEGER
                      name: rows
                      value: '3'
                - type: item
                  name: 'Cluster Name'
                  x: '3'
                  width: '3'
                  hide_header: 'YES'
                  fields:
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.cluster.name[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                - type: item
                  name: Uptime
                  x: '6'
                  width: '3'
                  hide_header: 'YES'
                  fields:
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.uptime[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                - type: item
                  name: Version
                  x: '9'
                  width: '3'
                  hide_header: 'YES'
                  fields:
                    - type: ITEM
                      name: itemid
                      value:
                        host: 'VMware Hypervisor'
                        key: 'vmware.hv.version[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
                - type: graph
                  x: '12'
                  width: '12'
                  height: '5'
                  hide_header: 'YES'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'VMware Hypervisor'
                        name: 'CPU Readiness %'
                - type: graph
                  name: 'CPU usage %'
                  x: '12'
                  'y': '5'
                  width: '12'
                  height: '5'
                  hide_header: 'YES'
                  fields:
                    - type: GRAPH
                      name: graphid
                      value:
                        host: 'VMware Hypervisor'
                        name: 'CPU usage %'
      valuemaps:
        - uuid: 25d04e2838af4fcca9ddd21df6781497
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
        - uuid: 2b324fd8d7624874a3a81449b62c2cd6
          name: 'VMware status'
          mappings:
            - value: '0'
              newvalue: gray
            - value: '1'
              newvalue: green
            - value: '2'
              newvalue: yellow
            - value: '3'
              newvalue: red
  graphs:
    - uuid: a6eeb68bc07e45d7ab69acd0a6bb65c6
      name: 'CPU Readiness %'
      graph_items:
        - color: 1A7C11
          calc_fnc: ALL
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/readiness[average]"]'
    - uuid: 787a08919870455c9baefd5435f6adf5
      name: 'CPU Readiness Summation'
      graph_items:
        - color: 1A7C11
          calc_fnc: ALL
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.perfcounter[{$VMWARE.URL},{HOST.HOST},"cpu/ready[summation]"]'
    - uuid: 994de5bd253145e388ed682881ad354e
      name: 'CPU usage %'
      percent_left: '90'
      percent_right: '100'
      graph_items:
        - color: 1A7C11
          calc_fnc: ALL
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.cpu.usage.perf[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
    - uuid: 2c799362d1b5460cbba72499b4a4c65a
      name: 'Host memory usage'
      graph_items:
        - color: FF0000
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.hw.memory[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
        - sortorder: '1'
          drawtype: FILLED_REGION
          color: 0080FF
          calc_fnc: ALL
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.memory.used[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
    - uuid: 2181556d9e794b6aa8a9b18883158a9c
      name: 'Number of Guest VMs'
      graph_items:
        - drawtype: FILLED_REGION
          color: 0080FF
          calc_fnc: ALL
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.vm.num[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
    - uuid: 14baca8db6ff4c868c2a7765674bd92e
      name: 'VMware host network usage(?)'
      graph_items:
        - color: 1A7C11
          calc_fnc: ALL
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.network.in[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
        - sortorder: '1'
          color: '274482'
          calc_fnc: ALL
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.network.out[{$VMWARE.URL},{$VMWARE.HV.UUID},bps]'
    - uuid: 1bf2bd689b824326890cd63daaa0b645
      name: 'VMware Host Power usage'
      graph_items:
        - drawtype: FILLED_REGION
          color: 1A7C11
          calc_fnc: ALL
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.power[{$VMWARE.URL},{$VMWARE.HV.UUID}]'
        - sortorder: '1'
          color: FF0000
          calc_fnc: ALL
          item:
            host: 'VMware Hypervisor'
            key: 'vmware.hv.power[{$VMWARE.URL},{$VMWARE.HV.UUID},max]'

